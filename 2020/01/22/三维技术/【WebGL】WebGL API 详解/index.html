<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="keywords" content="三维技术,WebGL,API">
<meta name="description" content="【WebGL】WebGL API 详解">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>衷于栖</title>
<!--[if lte IE 10]><script>window.location.href='../../../../../upgrade.html';</script><![endif]-->
<link href="../../../../../css/bootstrap.min.css" rel="stylesheet">
<link href="../../../../../css/nifty.min.css" rel="stylesheet">
<link href="../../../../../css/custom2.css" rel="stylesheet">
<script type="text/javascript">
var ctx = '../../../../..';

var springStartTime = new Date('2020/01/25 00:00:00').getTime();
var springEndTime = new Date('2020/02/01 00:00:00').getTime();
var nowTime = new Date().getTime();
if (springStartTime < nowTime && springEndTime > nowTime) {
    document.write('<link href="../../../../../css/themes/type-a/theme-well-red.min.css" rel="stylesheet">');
    document.write('<link href="../../../../../css/custom.css" rel="stylesheet">');
}
</script>
<link href="../../../../../premium/icon-sets/icons/line-icons/premium-line-icons.min.css" rel="stylesheet">
<link href="../../../../../premium/icon-sets/icons/solid-icons/premium-solid-icons.min.css" rel="stylesheet">
<link href="../../../../../css/pace.min.css" rel="stylesheet">
<script src="../../../../../js/pace.min.js"></script></head>
<body>
<div id="container" class="effect aside-float aside-bright mainnav-out">

    <header id="navbar">
        <div id="navbar-container" class="boxed">
            <div class="navbar-header">
                <a href="../../../../../" class="navbar-brand">
                    <i class="psi-deer brand-icon" style="font-size: 36px; color: #ffb300;padding: 10px;"></i>
                    <div class="brand-title">
                        <span class="brand-text">衷于栖</span>
                    </div>
                </a>
            </div>
            <div class="navbar-content clearfix">
                <ul class="hidden-sm hidden-md hidden-lg nav navbar-top-links pull-left">
                    <li>
                        <i class="psi-deer brand-icon" style="font-size: 36px; color: #ffb300;padding: 10px;"></i>
                        <div class="brand-title pull-right">
                            <span class="brand-text" style="color: #dbdbdb;">衷于栖</span>
                        </div>
                    </li>
                </ul>
                <ul class="nav navbar-top-links">
                    <li>
                        <div class="custom-search-form">
                            <label class="btn btn-trans" for="search-input" data-toggle="collapse" data-target="#nav-searchbox">
                                <i class="pli-magnifi-glass"></i>
                            </label>
                            <div class="search-container collapse" id="nav-searchbox">
                                <input id="search-input" type="text" class="form-control" placeholder="搜索..." autocomplete="off">
                            </div>
                        </div>
                    </li>
                </ul>
                <ul class="nav navbar-top-links">
                    <li>
                        <a href="../../../../../">
                            <i class="pli-home" style="margin-top: -3px;margin-right: 3px;"></i>首页
                        </a>
                    </li>
                    <li>
                        <a href="../../../../../archives">
                            <i class="pli-big-data" style="margin-top: -3px;margin-right: 3px;"></i>归档
                        </a>
                    </li>
                    <li>
                        <a href="../../../../../about">
                            <i class="pli-robot" style="margin-top: -3px;margin-right: 3px;"></i>关于
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </header>
    <div class="boxed">
        <div id="content-container">
            <div id="page-content">
                <hr class="new-section-sm bord-no">

                <div class="row">
                    <div class="col-lg-10 col-lg-offset-1">
                        <div class="panel">
                            <div class="fixed-fluid">
                                <div class="fixed-sm-250 pull-sm-right">
<div class="pad-btm bord-btm">
    <div class="panel widget">
        <div class="widget-header bg-purple">
            <img class="widget-bg img-responsive custom-profile" src="../../../../../img/avatar.jpg" alt="Image">
        </div>
        <div class="widget-body text-center">
            <img alt="Profile Picture" class="widget-img img-circle img-border-light" src="../../../../../img/profile-photos/5.png">
            <h4 class="mar-no text-main">衷于栖</h4>
            <p class="text-muted mar-no">自由开发者</p>
            <div class="pad-ver btn-groups">
                <a href="mailto:feedback@zhoyq.com" class="btn btn-icon pli-email icon-lg add-tooltip" data-original-title="邮箱" data-container="body"></a>
                <a href="https://gitee.com/liu-lu" class="btn btn-icon pli-cloud icon-lg add-tooltip" data-original-title="码云" data-container="body"></a>
                <a href="https://weibo.com/liulu010" class="btn btn-icon pli-pinterest icon-lg add-tooltip" data-original-title="微博" data-container="body"></a>
                <a href="../../../../../atom.xml" class="btn btn-icon pli-rss icon-lg add-tooltip" data-original-title="RSS订阅" data-container="body"></a>
            </div>
        </div>
    </div>
</div><p class="hidden-xs pad-hor mar-top text-main text-bold text-sm text-uppercase">分类目录</p>
<div class="hidden-xs list-group bg-trans pad-btm bord-btm">
    <a href="../../../../../categories/三维技术" class="list-group-item list-item-sm">三维技术<span class="badge badge-success custom-background-color-red">4</span></a>
    <a href="../../../../../categories/介绍" class="list-group-item list-item-sm">介绍<span class="badge badge-success custom-background-color-red">2</span></a>
    <a href="../../../../../categories/应用" class="list-group-item list-item-sm">应用<span class="badge badge-success custom-background-color-red">1</span></a>
    <a href="../../../../../categories/异常" class="list-group-item list-item-sm">异常<span class="badge badge-success custom-background-color-red">1</span></a>
    <a href="../../../../../categories/技术笔记" class="list-group-item list-item-sm">技术笔记<span class="badge badge-success custom-background-color-red">17</span></a>
    <a href="../../../../../categories/游戏" class="list-group-item list-item-sm">游戏<span class="badge badge-success custom-background-color-red">2</span></a>
    <a href="../../../../../categories/源码解读" class="list-group-item list-item-sm">源码解读<span class="badge badge-success custom-background-color-red">3</span></a>
    <a href="../../../../../categories/管理" class="list-group-item list-item-sm">管理<span class="badge badge-success custom-background-color-red">5</span></a>
    <a href="../../../../../categories/读书笔记" class="list-group-item list-item-sm">读书笔记<span class="badge badge-success custom-background-color-red">3</span></a>
    <a href="../../../../../categories/车联网" class="list-group-item list-item-sm">车联网<span class="badge badge-success custom-background-color-red">3</span></a>
    <a href="../../../../../categories/转载" class="list-group-item list-item-sm">转载<span class="badge badge-success custom-background-color-red">11</span></a>
    <a href="../../../../../categories/随笔" class="list-group-item list-item-sm">随笔<span class="badge badge-success custom-background-color-red">3</span></a>
</div><p class="hidden-xs pad-hor mar-top text-main text-bold text-sm text-uppercase">热门标签</p>
<ul class="hidden-xs list-inline mar-hor pad-btm bord-btm">
    <li class="tag tag-sm"><a href="../../../../../tags/GIT"><i class="pli-tag"></i> GIT</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/工作流指南"><i class="pli-tag"></i> 工作流指南</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/docker"><i class="pli-tag"></i> docker</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/SCRUM"><i class="pli-tag"></i> SCRUM</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/JT808"><i class="pli-tag"></i> JT808</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/百度地图"><i class="pli-tag"></i> 百度地图</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/狼人杀"><i class="pli-tag"></i> 狼人杀</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/模型数据结构"><i class="pli-tag"></i> 模型数据结构</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/敏捷"><i class="pli-tag"></i> 敏捷</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/扩展"><i class="pli-tag"></i> 扩展</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/学习WEBGL系列"><i class="pli-tag"></i> 学习WEBGL系列</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/可维护"><i class="pli-tag"></i> 可维护</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/GlTF"><i class="pli-tag"></i> GlTF</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/CentOS"><i class="pli-tag"></i> CentOS</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/高德地图"><i class="pli-tag"></i> 高德地图</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/集中式"><i class="pli-tag"></i> 集中式</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/郭麒麟"><i class="pli-tag"></i> 郭麒麟</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/郭德纲"><i class="pli-tag"></i> 郭德纲</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/进阶"><i class="pli-tag"></i> 进阶</a></li>
    <li class="tag tag-sm"><a href="../../../../../tags/路由节点编辑器"><i class="pli-tag"></i> 路由节点编辑器</a></li>
</ul><p class="hidden-xs pad-hor mar-top text-main text-bold text-sm text-uppercase">微信订阅</p>
<div class="hidden-xs pad-btm bord-btm img-gallery">
    <img class="img-responsive img-round" style=" width: 240px; margin: auto;" src="../../../../../img/wechatsub.jpg" alt="Image">
</div><p class="hidden-xs pad-hor mar-top text-main text-bold text-sm text-uppercase">友情链接</p>
<div class="hidden-xs list-group bg-trans pad-btm bord-btm">
    <a href="https://blog.wanghaida.com/" target="_blank" class="list-group-item list-item-sm">王海达博客</a>
    <a href="http://steve-yegge.blogspot.com/" target="_blank" class="list-group-item list-item-sm">Steve Yegge</a>
    <a href="https://www.debuginn.cn/" target="_blank" class="list-group-item list-item-sm">Debug 客栈</a>
    <a href="http://codelei.cn/" target="_blank" class="list-group-item list-item-sm">Codelei's Blog</a>
    <a href="http://fangzheng.xyz" target="_blank" class="list-group-item list-item-sm">笛卡尔积</a>
    <a href="http://blog.hxpgxt.cn/" target="_blank" class="list-group-item list-item-sm">Java九点半课堂</a>
    <a href="http://tiaocaoer.com/" target="_blank" class="list-group-item list-item-sm">薛定喵君</a>
</div>                                </div>
                                <div class="fluid">
                                    <div class="blog panel-body">
    <div class="blog-title media-block">
        <div class="media-right textright">
            <a href="#" class="btn btn-icon demo-psi-twitter icon-lg add-tooltip" data-original-title="Twitter" data-container="body"></a>
            <a href="#" class="btn btn-icon demo-psi-instagram icon-lg add-tooltip" data-original-title="Instagram" data-container="body"></a>
        </div>
        <div class="media-body">
            <a href="#" class="btn-link">
                <h1>【WebGL】WebGL API 详解</h1>
            </a>
            <p style="font-size: 10px;">2020-01-22&nbsp;&nbsp;&nbsp;&nbsp;
                <i class="psi-start-2 icon-fw custom-color-red"
                   style="margin-top: -3px;"></i><a href="../../../../../categories/三维技术" class="custom-color-red">三维技术</a>
            </p>
        </div>
    </div>
    <br>
    <div class="blog-content">
        <div class="blog-body">
            <p>基于 <a href="/attaches/FAAD61EAB3377ED8376ECDC2A15BF452.idl">WebGL Specifications</a> 最全面的API释疑。</p>
<blockquote>
<p>20201224 更新，删除其他标题，分类到对应标题下并添加注释</p>
</blockquote>
<!-- more -->
<h2>类型以及对象定义</h2>
<p>这部分内容主要定义一部分类型和数据结构。</p>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">typedef unsigned <span class="keyword">long</span>  GLenum;</span><br><span class="line">typedef <span class="keyword">boolean</span>        GLboolean;</span><br><span class="line">typedef unsigned <span class="keyword">long</span>  GLbitfield;</span><br><span class="line"></span><br><span class="line">typedef <span class="keyword">byte</span>           GLbyte;</span><br><span class="line">typedef <span class="keyword">short</span>          GLshort;</span><br><span class="line">typedef <span class="keyword">long</span>           GLint;</span><br><span class="line">typedef <span class="keyword">long</span>           GLsizei;</span><br><span class="line">typedef <span class="keyword">long</span> <span class="keyword">long</span>      GLintptr;</span><br><span class="line">typedef <span class="keyword">long</span> <span class="keyword">long</span>      GLsizeiptr;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这个类型应该是 无符号整型 8位</span></span><br><span class="line"><span class="comment">// 但是Web IDL中并不存在这种类型</span></span><br><span class="line"><span class="comment">// 所以用 octet 代替 占位</span></span><br><span class="line">typedef octet          GLubyte;</span><br><span class="line">typedef unsigned <span class="keyword">short</span> GLushort;</span><br><span class="line">typedef unsigned <span class="keyword">long</span>  GLuint;</span><br><span class="line">typedef unrestricted <span class="keyword">float</span> GLfloat;</span><br><span class="line">typedef unrestricted <span class="keyword">float</span> GLclampf;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 由 WebGLContextAttributes 引用</span></span><br><span class="line"><span class="keyword">enum</span> WebGLPowerPreference { &quot;<span class="keyword">default</span>&quot;, &quot;low-power&quot;, &quot;high-performance&quot; };</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取上下文时支持的参数</span></span><br><span class="line"><span class="comment">// getContext('webgl', &lt;WebGLContextAttributes&gt;)</span></span><br><span class="line">dictionary WebGLContextAttributes {</span><br><span class="line">    <span class="keyword">boolean</span> alpha = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">boolean</span> depth = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">boolean</span> stencil = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">boolean</span> antialias = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">boolean</span> premultipliedAlpha = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">boolean</span> preserveDrawingBuffer = <span class="keyword">false</span>;</span><br><span class="line">    WebGLPowerPreference powerPreference = &quot;<span class="keyword">default</span>&quot;;</span><br><span class="line">    <span class="keyword">boolean</span> failIfMajorPerformanceCaveat = <span class="keyword">false</span>;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">// [Exposed=(Window,Worker)] 代表可以同时在主线程和后台线程使用本对象</span></span><br><span class="line"></span><br><span class="line">[Exposed=(Window,Worker)]</span><br><span class="line"><span class="keyword">interface</span> WebGLObject {};</span><br><span class="line"></span><br><span class="line">[Exposed=(Window,Worker)]</span><br><span class="line"><span class="keyword">interface</span> WebGLBuffer : WebGLObject {};</span><br><span class="line"></span><br><span class="line">[Exposed=(Window,Worker)]</span><br><span class="line"><span class="keyword">interface</span> WebGLFramebuffer : WebGLObject {};</span><br><span class="line"></span><br><span class="line">[Exposed=(Window,Worker)]</span><br><span class="line"><span class="keyword">interface</span> WebGLProgram : WebGLObject {};</span><br><span class="line"></span><br><span class="line">[Exposed=(Window,Worker)]</span><br><span class="line"><span class="keyword">interface</span> WebGLRenderbuffer : WebGLObject {};</span><br><span class="line"></span><br><span class="line">[Exposed=(Window,Worker)]</span><br><span class="line"><span class="keyword">interface</span> WebGLShader : WebGLObject {};</span><br><span class="line"></span><br><span class="line">[Exposed=(Window,Worker)]</span><br><span class="line"><span class="keyword">interface</span> WebGLTexture : WebGLObject {};</span><br><span class="line"></span><br><span class="line">[Exposed=(Window,Worker)]</span><br><span class="line"><span class="keyword">interface</span> WebGLUniformLocation {};</span><br><span class="line"></span><br><span class="line">[Exposed=(Window,Worker)]</span><br><span class="line"><span class="keyword">interface</span> WebGLActiveInfo {</span><br><span class="line">    readonly attribute GLint size;</span><br><span class="line">    readonly attribute GLenum type;</span><br><span class="line">    readonly attribute DOMString name;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">[Exposed=(Window,Worker)]</span><br><span class="line"><span class="keyword">interface</span> WebGLShaderPrecisionFormat {</span><br><span class="line">    readonly attribute GLint rangeMin;</span><br><span class="line">    readonly attribute GLint rangeMax;</span><br><span class="line">    readonly attribute GLint precision;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">typedef (ImageBitmap or</span><br><span class="line">         ImageData or</span><br><span class="line">         HTMLImageElement or</span><br><span class="line">         HTMLCanvasElement or</span><br><span class="line">         HTMLVideoElement or</span><br><span class="line">         OffscreenCanvas) TexImageSource;</span><br><span class="line"></span><br><span class="line">typedef ([AllowShared] Float32Array or sequence&lt;GLfloat&gt;) Float32List;</span><br><span class="line">typedef ([AllowShared] Int32Array or sequence&lt;GLint&gt;) Int32List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> mixin WebGLRenderingContextBase {</span><br><span class="line">    <span class="comment">// 内容整理到 'WebGLRenderingContext 对象'</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> mixin WebGLRenderingContextOverloads {</span><br><span class="line">    <span class="comment">// 内容整理到 'WebGLRenderingContext 对象'</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">[Exposed=(Window,Worker)]</span><br><span class="line"><span class="keyword">interface</span> WebGLRenderingContext {</span><br><span class="line">    <span class="comment">// 内容整理到 'WebGLRenderingContext 对象'</span></span><br><span class="line">};</span><br><span class="line">WebGLRenderingContext includes WebGLRenderingContextBase;</span><br><span class="line">WebGLRenderingContext includes WebGLRenderingContextOverloads;</span><br><span class="line"></span><br><span class="line">[Exposed=(Window,Worker),</span><br><span class="line"> Constructor(DOMString type,</span><br><span class="line"> optional WebGLContextEventInit eventInit)]</span><br><span class="line"><span class="keyword">interface</span> WebGLContextEvent : Event {</span><br><span class="line">    readonly attribute DOMString statusMessage;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">// EventInit is defined in the DOM4 specification.</span></span><br><span class="line">dictionary WebGLContextEventInit : EventInit {</span><br><span class="line">    DOMString statusMessage = &quot;&quot;;</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>
<h2>WebGLRenderingContext 对象</h2>
<h3>上下文相关</h3>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">[Exposed=Window] readonly attribute (HTMLCanvasElement or OffscreenCanvas) canvas;</span><br><span class="line"><span class="comment">// 可以在 Web Work 上使用 canvas api</span></span><br><span class="line"><span class="comment">// 需要调用 canvas.transferControlToOffscreen() 将渲染权转移给后台线程</span></span><br><span class="line">[Exposed=Worker] readonly attribute OffscreenCanvas canvas;</span><br><span class="line">readonly attribute GLsizei drawingBufferWidth;</span><br><span class="line">readonly attribute GLsizei drawingBufferHeight;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回类似下列上下文参数</span></span><br><span class="line"><span class="comment">// { </span></span><br><span class="line"><span class="comment">//   alpha: true, </span></span><br><span class="line"><span class="comment">//   antialias: true, </span></span><br><span class="line"><span class="comment">//   depth: true, </span></span><br><span class="line"><span class="comment">//   failIfMajorPerformanceCaveat: false, </span></span><br><span class="line"><span class="comment">//   premultipliedAlpha: true, </span></span><br><span class="line"><span class="comment">//   preserveDrawingBuffer: false, </span></span><br><span class="line"><span class="comment">//   stencil: false </span></span><br><span class="line"><span class="comment">// }</span></span><br><span class="line"><span class="comment">// 可以通过下列方法设置</span></span><br><span class="line"><span class="comment">// canvas.getContext('webgl', { antialias: false, depth: false });</span></span><br><span class="line">[WebGLHandlesContextLoss] WebGLContextAttributes? getContextAttributes();</span><br><span class="line"><span class="comment">// 标记上下文是否已经丢失</span></span><br><span class="line">[WebGLHandlesContextLoss] <span class="keyword">boolean</span> isContextLost();</span><br><span class="line"><span class="comment">// 阻断执行，直到之前所有的操作都完成。</span></span><br><span class="line"><span class="keyword">void</span> finish();</span><br><span class="line"><span class="comment">// 清空缓冲的命令，这会导致所有命令尽快执行完。</span></span><br><span class="line"><span class="keyword">void</span> flush();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* HintTarget */</span></span><br><span class="line"><span class="keyword">const</span> GLenum GENERATE_MIPMAP_HINT            = 0x8192;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* HintMode */</span></span><br><span class="line"><span class="keyword">const</span> GLenum DONT_CARE                      = 0x1100;</span><br><span class="line"><span class="keyword">const</span> GLenum FASTEST                        = 0x1101;</span><br><span class="line"><span class="keyword">const</span> GLenum NICEST                         = 0x1102;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给某些行为设置建议使用的模式。具体建议需要看执行的情况。</span></span><br><span class="line"><span class="keyword">void</span> hint(GLenum target, GLenum mode);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回给入的缓冲是否有效。</span></span><br><span class="line">[WebGLHandlesContextLoss] GLboolean isBuffer(WebGLBuffer? buffer);</span><br><span class="line"><span class="comment">// 测试这个上下文的WebGL功能是否开启。</span></span><br><span class="line">[WebGLHandlesContextLoss] GLboolean isEnabled(GLenum cap);</span><br><span class="line"><span class="comment">// 返回 Boolean 值，表示给入的 WebGLFrameBuffer 对象是否有效。</span></span><br><span class="line">[WebGLHandlesContextLoss] GLboolean isFramebuffer(WebGLFramebuffer? framebuffer);</span><br><span class="line"><span class="comment">// 返回一个 Boolean 值，表示给入的 WebGLProgram 是否有效。</span></span><br><span class="line">[WebGLHandlesContextLoss] GLboolean isProgram(WebGLProgram? program);</span><br><span class="line">[WebGLHandlesContextLoss] GLboolean isRenderbuffer(WebGLRenderbuffer? renderbuffer);</span><br><span class="line">[WebGLHandlesContextLoss] GLboolean isShader(WebGLShader? shader);</span><br><span class="line">[WebGLHandlesContextLoss] GLboolean isTexture(WebGLTexture? texture);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为抗锯齿效果设置多重取样覆盖参数。</span></span><br><span class="line"><span class="keyword">void</span> sampleCoverage(GLclampf value, GLboolean invert);</span><br></pre></td></tr></tbody></table></figure>
<h3>视口相关</h3>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置视口宽度</span></span><br><span class="line"><span class="keyword">void</span> viewport(GLint x, GLint y, GLsizei width, GLsizei height);</span><br><span class="line"><span class="comment">// 设置裁剪框。</span></span><br><span class="line"><span class="keyword">void</span> scissor(GLint x, GLint y, GLsizei width, GLsizei height);</span><br></pre></td></tr></tbody></table></figure>
<h3>缓冲区配置</h3>
<p><strong>配置缓冲区默认值</strong></p>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置指定缓冲区为指定的值（参数范围都是 0.0 - 1.0）</span></span><br><span class="line"><span class="comment">// clearColor 为颜色缓冲区指定值 默认 0.0, 0.0, 0.0, 0.0</span></span><br><span class="line"><span class="comment">// clearDepth 为深度缓冲区指定值 默认 1.0</span></span><br><span class="line"><span class="comment">// clearStencil 为模板缓冲区指定值 默认 0</span></span><br><span class="line"><span class="keyword">void</span> clearColor(GLclampf red, GLclampf green, GLclampf blue, GLclampf alpha);</span><br><span class="line"><span class="keyword">void</span> clearDepth(GLclampf depth);</span><br><span class="line"><span class="keyword">void</span> clearStencil(GLint s);</span><br></pre></td></tr></tbody></table></figure>
<p><strong>配置颜色缓冲区处理方式</strong></p>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 透明混合参数</span></span><br><span class="line"><span class="comment">// blendFunc 的 sfactor dfactor 参数</span></span><br><span class="line"><span class="keyword">const</span> GLenum ZERO                           = 0;</span><br><span class="line"><span class="keyword">const</span> GLenum ONE                            = 1;</span><br><span class="line"><span class="keyword">const</span> GLenum SRC_COLOR                      = 0x0300;</span><br><span class="line"><span class="keyword">const</span> GLenum ONE_MINUS_SRC_COLOR            = 0x0301;</span><br><span class="line"><span class="keyword">const</span> GLenum SRC_ALPHA                      = 0x0302;</span><br><span class="line"><span class="keyword">const</span> GLenum ONE_MINUS_SRC_ALPHA            = 0x0303;</span><br><span class="line"><span class="keyword">const</span> GLenum DST_ALPHA                      = 0x0304;</span><br><span class="line"><span class="keyword">const</span> GLenum ONE_MINUS_DST_ALPHA            = 0x0305;</span><br><span class="line"></span><br><span class="line"><span class="comment">// blendFunc 的 sfactor 参数</span></span><br><span class="line"><span class="keyword">const</span> GLenum DST_COLOR                      = 0x0306;</span><br><span class="line"><span class="keyword">const</span> GLenum ONE_MINUS_DST_COLOR            = 0x0307;</span><br><span class="line"><span class="keyword">const</span> GLenum SRC_ALPHA_SATURATE             = 0x0308;</span><br><span class="line"></span><br><span class="line"><span class="comment">// blendEquation 的 mode 参数</span></span><br><span class="line"><span class="keyword">const</span> GLenum FUNC_ADD                       = 0x8006;</span><br><span class="line"><span class="keyword">const</span> GLenum FUNC_SUBTRACT                  = 0x800A;</span><br><span class="line"><span class="keyword">const</span> GLenum FUNC_REVERSE_SUBTRACT          = 0x800B;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过参数 sfactor 和 dfactor 指定进行混合操作的函数 混合后的颜色如下计算</span></span><br><span class="line"><span class="comment">// 混合后颜色 = 源颜色 * sfactor + 目标颜色 * dfactor</span></span><br><span class="line"><span class="comment">// @param sfactor 见此方法上枚举</span></span><br><span class="line"><span class="comment">// @param dfactor 见此方法上枚举</span></span><br><span class="line"><span class="keyword">void</span> blendFunc(GLenum sfactor, GLenum dfactor);</span><br><span class="line"><span class="comment">// 同上 只是分开设置RGB 和 ALPHA</span></span><br><span class="line"><span class="keyword">void</span> blendFuncSeparate(GLenum srcRGB, GLenum dstRGB, GLenum srcAlpha, GLenum dstAlpha);</span><br><span class="line"><span class="comment">// 设置源和目标混合因子 值范围 在0到1之间</span></span><br><span class="line"><span class="keyword">void</span> blendColor(GLclampf red, GLclampf green, GLclampf blue, GLclampf alpha);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将RGB混合方程和阿尔法混合方程设置为单个方程。</span></span><br><span class="line"><span class="comment">// 混合方程式确定新像素如何与 WebGLFramebuffer 中的像素组合</span></span><br><span class="line"><span class="comment">// @ext EXT_blend_minmax</span></span><br><span class="line"><span class="keyword">void</span> blendEquation(GLenum mode);</span><br><span class="line"><span class="comment">// 同上 只是分开设置RGB 和 ALPHA</span></span><br><span class="line"><span class="comment">// @ext EXT_blend_minmax</span></span><br><span class="line"><span class="keyword">void</span> blendEquationSeparate(GLenum modeRGB, GLenum modeAlpha);</span><br><span class="line"><span class="comment">// 设置在绘制或渲染WebGLFramebuffer时要开启或关闭的颜色分量。</span></span><br><span class="line"><span class="keyword">void</span> colorMask(GLboolean red, GLboolean green, GLboolean blue, GLboolean alpha);</span><br></pre></td></tr></tbody></table></figure>
<p><strong>配置裁剪面</strong></p>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cullFace 的 mode 参数</span></span><br><span class="line"><span class="keyword">const</span> GLenum FRONT                          = 0x0404;</span><br><span class="line"><span class="keyword">const</span> GLenum BACK                           = 0x0405;</span><br><span class="line"><span class="keyword">const</span> GLenum FRONT_AND_BACK                 = 0x0408;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* FrontFaceDirection */</span></span><br><span class="line"><span class="keyword">const</span> GLenum CW                             = 0x0900;</span><br><span class="line"><span class="keyword">const</span> GLenum CCW                            = 0x0901;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置多边形的正面或反面是否要被排除。</span></span><br><span class="line"><span class="comment">// gl.enable(gl.CULL_FACE);</span></span><br><span class="line"><span class="comment">// gl.cullFace(gl.FRONT_AND_BACK);</span></span><br><span class="line"><span class="comment">// gl.getParameter(gl.CULL_FACE_MODE) === gl.FRONT_AND_BACK;</span></span><br><span class="line"><span class="keyword">void</span> cullFace(GLenum mode);</span><br><span class="line"><span class="comment">// 设置多边形的正面使用顺时针还是逆时针绘制表示。</span></span><br><span class="line"><span class="keyword">void</span> frontFace(GLenum mode);</span><br></pre></td></tr></tbody></table></figure>
<p><strong>配置深度缓冲区处理方式</strong></p>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// depthFunc 的 func 参数</span></span><br><span class="line"><span class="keyword">const</span> GLenum NEVER                          = 0x0200;</span><br><span class="line"><span class="keyword">const</span> GLenum LESS                           = 0x0201;</span><br><span class="line"><span class="keyword">const</span> GLenum EQUAL                          = 0x0202;</span><br><span class="line"><span class="keyword">const</span> GLenum LEQUAL                         = 0x0203;</span><br><span class="line"><span class="keyword">const</span> GLenum GREATER                        = 0x0204;</span><br><span class="line"><span class="keyword">const</span> GLenum NOTEQUAL                       = 0x0205;</span><br><span class="line"><span class="keyword">const</span> GLenum GEQUAL                         = 0x0206;</span><br><span class="line"><span class="keyword">const</span> GLenum ALWAYS                         = 0x0207;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置比较输入像素深度和深度缓存值得函数</span></span><br><span class="line"><span class="comment">// gl.enable(gl.DEPTH_TEST);</span></span><br><span class="line"><span class="comment">// gl.depthFunc(gl.NEVER);</span></span><br><span class="line"><span class="comment">// gl.getParameter(gl.DEPTH_FUNC) === gl.NEVER;</span></span><br><span class="line"><span class="keyword">void</span> depthFunc(GLenum func);</span><br><span class="line"><span class="comment">// 设置从规范化设备坐标映射到窗口或视口坐标时的深度范围。</span></span><br><span class="line"><span class="keyword">void</span> depthRange(GLclampf zNear, GLclampf zFar);</span><br><span class="line"><span class="comment">// 锁定或者释放深度缓冲区的写入操作</span></span><br><span class="line"><span class="comment">// @param flag false 只读 true 可读写</span></span><br><span class="line"><span class="keyword">void</span> depthMask(GLboolean flag);</span><br></pre></td></tr></tbody></table></figure>
<p><strong>配置线宽</strong></p>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置线宽。无效</span></span><br><span class="line"><span class="keyword">void</span> lineWidth(GLfloat width);</span><br></pre></td></tr></tbody></table></figure>
<p><strong>配置模板缓冲区处理方式</strong></p>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* StencilOp */</span></span><br><span class="line"><span class="comment">/* ZERO */</span></span><br><span class="line"><span class="keyword">const</span> GLenum KEEP                           = 0x1E00;</span><br><span class="line"><span class="keyword">const</span> GLenum REPLACE                        = 0x1E01;</span><br><span class="line"><span class="keyword">const</span> GLenum INCR                           = 0x1E02;</span><br><span class="line"><span class="keyword">const</span> GLenum DECR                           = 0x1E03;</span><br><span class="line"><span class="keyword">const</span> GLenum INVERT                         = 0x150A;</span><br><span class="line"><span class="keyword">const</span> GLenum INCR_WRAP                      = 0x8507;</span><br><span class="line"><span class="keyword">const</span> GLenum DECR_WRAP                      = 0x8508;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同时设置前面和背面的模板测试函数，及其引用值。</span></span><br><span class="line"><span class="keyword">void</span> stencilFunc(GLenum func, GLint ref, GLuint mask);</span><br><span class="line"><span class="comment">// 可分开设置前面或背面的模板测试函数，及其引用值。</span></span><br><span class="line"><span class="keyword">void</span> stencilFuncSeparate(GLenum face, GLenum func, GLint ref, GLuint mask);</span><br><span class="line"><span class="comment">// 同时启用或禁用，前面和背面的模板测试掩码。</span></span><br><span class="line"><span class="keyword">void</span> stencilMask(GLuint mask);</span><br><span class="line"><span class="comment">// 可分开启用或禁用，前面和背面的模板测试掩码。</span></span><br><span class="line"><span class="keyword">void</span> stencilMaskSeparate(GLenum face, GLuint mask);</span><br><span class="line"><span class="comment">// 同时设置，在前面和背面的模板缓冲区上执行的操作。</span></span><br><span class="line"><span class="keyword">void</span> stencilOp(GLenum fail, GLenum zfail, GLenum zpass);</span><br><span class="line"><span class="comment">// 可分开设置，在前面和背面的模板缓冲区上执行的操作。</span></span><br><span class="line"><span class="keyword">void</span> stencilOpSeparate(GLenum face, GLenum fail, GLenum zfail, GLenum zpass);</span><br></pre></td></tr></tbody></table></figure>
<h3>缓冲区相关方法</h3>
<p><strong>清理缓冲区</strong></p>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 缓冲区类型</span></span><br><span class="line"><span class="comment">// 为 gl.clear 的参数</span></span><br><span class="line"><span class="keyword">const</span> GLenum DEPTH_BUFFER_BIT               = 0x00000100;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_BUFFER_BIT             = 0x00000400;</span><br><span class="line"><span class="keyword">const</span> GLenum COLOR_BUFFER_BIT               = 0x00004000;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 清理指定缓缓冲区内容, 可以通过或运算符一次清理多个类型的缓冲区</span></span><br><span class="line"><span class="comment">// @param mask 颜色缓冲区（COLOR_BUFFER_BIT） | 深度缓冲区（DEPTH_BUFFER_BIT） | 模板缓冲区（STENCIL_BUFFER_BIT）</span></span><br><span class="line"><span class="keyword">void</span> clear(GLbitfield mask);</span><br></pre></td></tr></tbody></table></figure>
<p><strong>读取缓冲区</strong></p>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 从颜色缓冲区中读取 x y width height 参数确定的矩形块中的所有像素值 并保存在pixels指定的数组中</span></span><br><span class="line"><span class="comment">// @param x y 选择矩形区域左上角坐标</span></span><br><span class="line"><span class="comment">// @param width height 选择矩形区域的宽 长</span></span><br><span class="line"><span class="comment">// @param format 指定像素值的颜色格式 必须为 gl.RGB</span></span><br><span class="line"><span class="comment">// @param type 指定像素值得数据格式 必须是 gl.UNSIGNED_BYTE</span></span><br><span class="line"><span class="comment">// @param pixels 类型化数组 Unit8Array</span></span><br><span class="line"><span class="keyword">void</span> readPixels(GLint x, GLint y, GLsizei width, GLsizei height, GLenum format, GLenum type, [AllowShared] ArrayBufferView? pixels);</span><br></pre></td></tr></tbody></table></figure>
<p><strong>帧缓冲区</strong></p>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Framebuffer Object. */</span></span><br><span class="line"><span class="keyword">const</span> GLenum FRAMEBUFFER                    = 0x8D40;</span><br><span class="line"><span class="keyword">const</span> GLenum RENDERBUFFER                   = 0x8D41;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 表示渲染缓冲区将替代颜色缓冲区中的数据格式</span></span><br><span class="line"><span class="keyword">const</span> GLenum RGBA4                          = 0x8056;</span><br><span class="line"><span class="keyword">const</span> GLenum RGB5_A1                        = 0x8057;</span><br><span class="line"><span class="keyword">const</span> GLenum RGB565                         = 0x8D62;</span><br><span class="line"><span class="comment">// 表示渲染缓冲区将替代深度缓冲区中的数据格式</span></span><br><span class="line"><span class="keyword">const</span> GLenum DEPTH_COMPONENT16              = 0x81A5;</span><br><span class="line"><span class="comment">// 表示渲染缓冲区将替代模板缓冲区中的数据格式</span></span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_INDEX8                 = 0x8D48;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 帧缓冲区作为 attachment（附件）的参数</span></span><br><span class="line"><span class="comment">// 颜色附件 深度附件 模板附件 模板深度附件</span></span><br><span class="line"><span class="keyword">const</span> GLenum COLOR_ATTACHMENT0              = 0x8CE0;</span><br><span class="line"><span class="keyword">const</span> GLenum DEPTH_ATTACHMENT               = 0x8D00;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_ATTACHMENT             = 0x8D20;</span><br><span class="line"><span class="keyword">const</span> GLenum DEPTH_STENCIL_ATTACHMENT       = 0x821A;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ============</span></span><br><span class="line"><span class="comment">// = 渲染缓冲区</span></span><br><span class="line"><span class="comment">// ============</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建渲染缓冲区对象</span></span><br><span class="line">WebGLRenderbuffer? createRenderbuffer();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除渲染缓冲区对象</span></span><br><span class="line"><span class="keyword">void</span> deleteRenderbuffer(WebGLRenderbuffer? renderbuffer);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将 renderbuffer 指定的渲染缓冲区对象绑定在target目标上</span></span><br><span class="line"><span class="comment">// 如果 renderbuffer 为 null 则将已经绑定在target目标上的渲染缓冲区对象解除绑定</span></span><br><span class="line"><span class="comment">// @param target 必须是 gl.RENDERBUFFER</span></span><br><span class="line"><span class="keyword">void</span> bindRenderbuffer(GLenum target, WebGLRenderbuffer? renderbuffer);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建并初始化渲染缓冲区的数据区</span></span><br><span class="line"><span class="comment">// @param target 必须是 gl.RENDERBUFFER</span></span><br><span class="line"><span class="comment">// @param internalformat 指定渲染缓冲区中的数据格式 见方法上枚举</span></span><br><span class="line"><span class="comment">// @param width height 指定渲染缓冲区的宽度和高度 单位像素</span></span><br><span class="line"><span class="keyword">void</span> renderbufferStorage(GLenum target, GLenum internalformat, GLsizei width, GLsizei height);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ==========</span></span><br><span class="line"><span class="comment">// = 帧缓冲区</span></span><br><span class="line"><span class="comment">// ==========</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建帧缓冲区对象</span></span><br><span class="line">WebGLFramebuffer? createFramebuffer();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除帧缓冲区对象</span></span><br><span class="line"><span class="keyword">void</span> deleteFramebuffer(WebGLFramebuffer? framebuffer);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定帧缓冲区</span></span><br><span class="line"><span class="comment">// FBO就是由颜色附件（COLOR_ATTACHMENT0)，深度附件（DEPTH_ATTACHMENT），模板附件（STENCIL_ATTACHMENT）组成的一个逻辑存储对象</span></span><br><span class="line"><span class="comment">// RBO是一个2D图像缓冲区，可以用于分配和存储颜色值，深度或者模板值，可以作为FBO的颜色，深度模板附件。</span></span><br><span class="line"><span class="keyword">void</span> bindFramebuffer(GLenum target, WebGLFramebuffer? framebuffer);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置纹理为 attachment 附件</span></span><br><span class="line"><span class="keyword">void</span> framebufferTexture2D(GLenum target, GLenum attachment, GLenum textarget, WebGLTexture? texture, GLint level);</span><br><span class="line"><span class="comment">// 设置渲染缓冲区对象为 attachment 附件</span></span><br><span class="line"><span class="keyword">void</span> framebufferRenderbuffer(GLenum target, GLenum attachment, GLenum renderbuffertarget, WebGLRenderbuffer? renderbuffer);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查帧缓冲区</span></span><br><span class="line">[WebGLHandlesContextLoss] GLenum checkFramebufferStatus(GLenum target);</span><br></pre></td></tr></tbody></table></figure>
<h3>缓存对象</h3>
<p>使用缓存的五个步骤</p>
<ol>
<li>createBuffer</li>
<li>bindBuffer</li>
<li>bufferData</li>
<li>vertexAttribPointer</li>
<li>enableVertexAttribArray</li>
</ol>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 缓存对象</span></span><br><span class="line"><span class="comment">// bindBuffer 第一个参数</span></span><br><span class="line"><span class="keyword">const</span> GLenum ARRAY_BUFFER                   = 0x8892;</span><br><span class="line"><span class="keyword">const</span> GLenum ELEMENT_ARRAY_BUFFER           = 0x8893;</span><br><span class="line"><span class="comment">// const GLenum ARRAY_BUFFER_BINDING           = 0x8894;</span></span><br><span class="line"><span class="comment">// const GLenum ELEMENT_ARRAY_BUFFER_BINDING   = 0x8895;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 绘制模式</span></span><br><span class="line"><span class="comment">// 下文中的usage参数值</span></span><br><span class="line"><span class="keyword">const</span> GLenum STREAM_DRAW                    = 0x88E0;</span><br><span class="line"><span class="keyword">const</span> GLenum STATIC_DRAW                    = 0x88E4;</span><br><span class="line"><span class="keyword">const</span> GLenum DYNAMIC_DRAW                   = 0x88E8;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数据类型</span></span><br><span class="line"><span class="comment">// vertexAttribPointer 中参数type的取值</span></span><br><span class="line"><span class="keyword">const</span> GLenum BYTE                           = 0x1400;</span><br><span class="line"><span class="keyword">const</span> GLenum UNSIGNED_BYTE                  = 0x1401;</span><br><span class="line"><span class="keyword">const</span> GLenum SHORT                          = 0x1402;</span><br><span class="line"><span class="keyword">const</span> GLenum UNSIGNED_SHORT                 = 0x1403;</span><br><span class="line"><span class="keyword">const</span> GLenum INT                            = 0x1404;</span><br><span class="line"><span class="keyword">const</span> GLenum UNSIGNED_INT                   = 0x1405;</span><br><span class="line"><span class="keyword">const</span> GLenum FLOAT                          = 0x1406;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建缓冲区对象</span></span><br><span class="line">WebGLBuffer? createBuffer();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 允许使用buffer表示的缓冲区对象并将其绑定到target表示的目标上</span></span><br><span class="line"><span class="comment">// @param target </span></span><br><span class="line"><span class="comment">//        ARRAY_BUFFER 表示缓冲区对象中包含顶点数据</span></span><br><span class="line"><span class="comment">//        ELEMENT_ARRAY_BUFFER 表示缓冲去对象中包含了顶点的索引值</span></span><br><span class="line"><span class="keyword">void</span> bindBuffer(GLenum target, WebGLBuffer? buffer);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开辟存储空间，向绑定在target上的缓冲区对象写入数据data</span></span><br><span class="line"><span class="comment">// @param target 同上</span></span><br><span class="line"><span class="comment">// @param data 类型化数组 比如：Float32Array...</span></span><br><span class="line"><span class="comment">// @param usage 优化效率 可以是以下值：</span></span><br><span class="line"><span class="comment">//        STATIC_DRAW 只会向缓冲区写入一次数据 需要绘制很多次</span></span><br><span class="line"><span class="comment">//        STREAM_DRAW 只会向缓冲区写入一次数据 需要绘制若干次</span></span><br><span class="line"><span class="comment">//        DYNAMIC_DRAW 会向缓冲区对象中多次写入数据 并绘制很多次</span></span><br><span class="line"><span class="keyword">void</span> bufferData(GLenum target, [AllowShared] BufferSource? data, GLenum usage);</span><br><span class="line"><span class="keyword">void</span> bufferData(GLenum target, GLsizeiptr size, GLenum usage);</span><br><span class="line"><span class="keyword">void</span> bufferSubData(GLenum target, GLintptr offset, [AllowShared] BufferSource data);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将绑定到ARRAY_BUFFER的缓冲区对象分配给index指定的attribute变量</span></span><br><span class="line"><span class="comment">// @param index 指向attribute变量</span></span><br><span class="line"><span class="comment">// @param size 指定缓冲区中每个顶点分量的个数</span></span><br><span class="line"><span class="comment">// @param type 数据格式 见上面的枚举</span></span><br><span class="line"><span class="comment">// @param normalized 是否将浮点型数据归一化到[0, 1]或者[-1, 1]区间</span></span><br><span class="line"><span class="comment">// @param stride 指定相邻两个顶点之间的字节数 默认是0</span></span><br><span class="line"><span class="comment">// @param offset 指定缓冲区对象中的偏移量 单位字节 可以利用这个偏移量赋值多个attribute</span></span><br><span class="line"><span class="keyword">void</span> vertexAttribPointer(GLuint index, GLint size, GLenum type, GLboolean normalized, GLsizei stride, GLintptr offset);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开启index对应的attribute对象</span></span><br><span class="line"><span class="comment">// 开启后不能通过 vertexAttrib[1234]f 传值</span></span><br><span class="line"><span class="keyword">void</span> enableVertexAttribArray(GLuint index);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭index对应的attribute对象</span></span><br><span class="line"><span class="keyword">void</span> disableVertexAttribArray(GLuint index);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除参数buffer表示的缓冲区对象</span></span><br><span class="line"><span class="comment">// @param buffer 缓冲区对象 由createBuffer创建</span></span><br><span class="line"><span class="keyword">void</span> deleteBuffer(WebGLBuffer? buffer);</span><br></pre></td></tr></tbody></table></figure>
<h3>attribute 相关</h3>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取由 name 参数指定的 attribute 变量存储地址</span></span><br><span class="line"><span class="comment">// @param program 指定包含顶点或者片元着色器的程序对象</span></span><br><span class="line"><span class="comment">// @param name 获取其存储的 attribute 变量名称，最大长度256字节</span></span><br><span class="line">[WebGLHandlesContextLoss] GLint getAttribLocation(WebGLProgram program, DOMString name);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定顶点索引到属性变量</span></span><br><span class="line"><span class="comment">// 使用缓冲区数据的时候需要用到的方法</span></span><br><span class="line"><span class="comment">// @param index 指定要绑定的通用顶点的索引 这个值直接赋值给 vertexAttribPointer 的 index 参数</span></span><br><span class="line"><span class="comment">// @param name 指定变量名</span></span><br><span class="line"><span class="comment">// 这里的 index 和 getAttribLocation 返回值是一样的</span></span><br><span class="line"><span class="keyword">void</span> bindAttribLocation(WebGLProgram program, GLuint index, DOMString name);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将数据传给由index参数指定的attribute变量</span></span><br><span class="line"><span class="keyword">void</span> vertexAttrib1f(GLuint index, GLfloat x);</span><br><span class="line"><span class="keyword">void</span> vertexAttrib2f(GLuint index, GLfloat x, GLfloat y);</span><br><span class="line"><span class="keyword">void</span> vertexAttrib3f(GLuint index, GLfloat x, GLfloat y, GLfloat z);</span><br><span class="line"><span class="keyword">void</span> vertexAttrib4f(GLuint index, GLfloat x, GLfloat y, GLfloat z, GLfloat w);</span><br><span class="line"><span class="comment">// 接收参数为 Float32Array 数组</span></span><br><span class="line"><span class="keyword">void</span> vertexAttrib1fv(GLuint index, Float32List values);</span><br><span class="line"><span class="keyword">void</span> vertexAttrib2fv(GLuint index, Float32List values);</span><br><span class="line"><span class="keyword">void</span> vertexAttrib3fv(GLuint index, Float32List values);</span><br><span class="line"><span class="keyword">void</span> vertexAttrib4fv(GLuint index, Float32List values);</span><br></pre></td></tr></tbody></table></figure>
<h3>uniform 相关</h3>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Uniform Types */</span></span><br><span class="line"><span class="keyword">const</span> GLenum FLOAT_VEC2                     = 0x8B50;</span><br><span class="line"><span class="keyword">const</span> GLenum FLOAT_VEC3                     = 0x8B51;</span><br><span class="line"><span class="keyword">const</span> GLenum FLOAT_VEC4                     = 0x8B52;</span><br><span class="line"><span class="keyword">const</span> GLenum INT_VEC2                       = 0x8B53;</span><br><span class="line"><span class="keyword">const</span> GLenum INT_VEC3                       = 0x8B54;</span><br><span class="line"><span class="keyword">const</span> GLenum INT_VEC4                       = 0x8B55;</span><br><span class="line"><span class="keyword">const</span> GLenum BOOL                           = 0x8B56;</span><br><span class="line"><span class="keyword">const</span> GLenum BOOL_VEC2                      = 0x8B57;</span><br><span class="line"><span class="keyword">const</span> GLenum BOOL_VEC3                      = 0x8B58;</span><br><span class="line"><span class="keyword">const</span> GLenum BOOL_VEC4                      = 0x8B59;</span><br><span class="line"><span class="keyword">const</span> GLenum FLOAT_MAT2                     = 0x8B5A;</span><br><span class="line"><span class="keyword">const</span> GLenum FLOAT_MAT3                     = 0x8B5B;</span><br><span class="line"><span class="keyword">const</span> GLenum FLOAT_MAT4                     = 0x8B5C;</span><br><span class="line"><span class="keyword">const</span> GLenum SAMPLER_2D                     = 0x8B5E;</span><br><span class="line"><span class="keyword">const</span> GLenum SAMPLER_CUBE                   = 0x8B60;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取指定名称的 uniform 变量存储位置</span></span><br><span class="line"><span class="comment">// @param program 制定的包含顶点或者片元着色器的程序对象</span></span><br><span class="line"><span class="comment">// @param name 指定想要获取其存储位置的uniform变量名称 最大长度256字节</span></span><br><span class="line">WebGLUniformLocation? getUniformLocation(WebGLProgram program, DOMString name);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将数据传给location指定的uniform变量</span></span><br><span class="line"><span class="keyword">void</span> uniform1f(WebGLUniformLocation? location, GLfloat x);</span><br><span class="line"><span class="keyword">void</span> uniform2f(WebGLUniformLocation? location, GLfloat x, GLfloat y);</span><br><span class="line"><span class="keyword">void</span> uniform3f(WebGLUniformLocation? location, GLfloat x, GLfloat y, GLfloat z);</span><br><span class="line"><span class="keyword">void</span> uniform4f(WebGLUniformLocation? location, GLfloat x, GLfloat y, GLfloat z, GLfloat w);</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> uniform1i(WebGLUniformLocation? location, GLint x);</span><br><span class="line"><span class="keyword">void</span> uniform2i(WebGLUniformLocation? location, GLint x, GLint y);</span><br><span class="line"><span class="keyword">void</span> uniform3i(WebGLUniformLocation? location, GLint x, GLint y, GLint z);</span><br><span class="line"><span class="keyword">void</span> uniform4i(WebGLUniformLocation? location, GLint x, GLint y, GLint z, GLint w);</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> uniform1fv(WebGLUniformLocation? location, Float32List v);</span><br><span class="line"><span class="keyword">void</span> uniform2fv(WebGLUniformLocation? location, Float32List v);</span><br><span class="line"><span class="keyword">void</span> uniform3fv(WebGLUniformLocation? location, Float32List v);</span><br><span class="line"><span class="keyword">void</span> uniform4fv(WebGLUniformLocation? location, Float32List v);</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> uniform1iv(WebGLUniformLocation? location, Int32List v);</span><br><span class="line"><span class="keyword">void</span> uniform2iv(WebGLUniformLocation? location, Int32List v);</span><br><span class="line"><span class="keyword">void</span> uniform3iv(WebGLUniformLocation? location, Int32List v);</span><br><span class="line"><span class="keyword">void</span> uniform4iv(WebGLUniformLocation? location, Int32List v);</span><br><span class="line"></span><br><span class="line"><span class="comment">// @param 是否对矩阵进行转置 默认 false 在webgl中必须是false</span></span><br><span class="line"><span class="keyword">void</span> uniformMatrix2fv(WebGLUniformLocation? location, GLboolean transpose, Float32List value);</span><br><span class="line"><span class="keyword">void</span> uniformMatrix3fv(WebGLUniformLocation? location, GLboolean transpose, Float32List value);</span><br><span class="line"><span class="keyword">void</span> uniformMatrix4fv(WebGLUniformLocation? location, GLboolean transpose, Float32List value);</span><br></pre></td></tr></tbody></table></figure>
<h3>texture 相关</h3>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pixelStorei 中参数pname取值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对图像进行Y轴反转，默认false</span></span><br><span class="line"><span class="keyword">const</span> GLenum UNPACK_FLIP_Y_WEBGL            = 0x9240; </span><br><span class="line"><span class="comment">// 将图像RGB颜色值每一个分量乘以A 默认false</span></span><br><span class="line"><span class="keyword">const</span> GLenum UNPACK_PREMULTIPLY_ALPHA_WEBGL = 0x9241; </span><br><span class="line"></span><br><span class="line"><span class="comment">// activeTexture 方法使用的枚举常量</span></span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE0                       = 0x84C0;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE1                       = 0x84C1;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE2                       = 0x84C2;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE3                       = 0x84C3;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE4                       = 0x84C4;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE5                       = 0x84C5;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE6                       = 0x84C6;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE7                       = 0x84C7;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE8                       = 0x84C8;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE9                       = 0x84C9;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE10                      = 0x84CA;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE11                      = 0x84CB;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE12                      = 0x84CC;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE13                      = 0x84CD;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE14                      = 0x84CE;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE15                      = 0x84CF;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE16                      = 0x84D0;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE17                      = 0x84D1;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE18                      = 0x84D2;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE19                      = 0x84D3;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE20                      = 0x84D4;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE21                      = 0x84D5;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE22                      = 0x84D6;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE23                      = 0x84D7;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE24                      = 0x84D8;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE25                      = 0x84D9;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE26                      = 0x84DA;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE27                      = 0x84DB;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE28                      = 0x84DC;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE29                      = 0x84DD;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE30                      = 0x84DE;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE31                      = 0x84DF;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bindTexture texParameterf texParameteri texImage2D 的 target 参数</span></span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE_2D                     = 0x0DE1;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE_CUBE_MAP               = 0x8513;</span><br><span class="line"></span><br><span class="line"><span class="comment">// texParameterf pname 参数</span></span><br><span class="line"><span class="comment">// texParameteri pname 参数</span></span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE_MAG_FILTER             = 0x2800;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE_MIN_FILTER             = 0x2801;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE_WRAP_S                 = 0x2802;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE_WRAP_T                 = 0x2803;</span><br><span class="line"></span><br><span class="line"><span class="comment">// texParameterf param 参数 当 pname = TEXTURE_MAG_FILTER | TEXTURE_MIN_FILTER</span></span><br><span class="line"><span class="comment">// texParameteri param 参数 当 pname = TEXTURE_MAG_FILTER | TEXTURE_MIN_FILTER</span></span><br><span class="line"><span class="comment">// 以下是非金字塔纹理常量</span></span><br><span class="line"><span class="comment">// 使用原纹理上距离映射后像素（新像素）中心最近的那个像素的颜色值，作为新像素的值（使用曼哈顿距离）</span></span><br><span class="line"><span class="comment">// 曼哈顿距离又称直角距离、棋盘距离。如(x1, y1) (x2, y2)的曼哈顿距离是 |x1 - x2| + |y1 - y2|</span></span><br><span class="line"><span class="keyword">const</span> GLenum NEAREST                        = 0x2600;</span><br><span class="line"><span class="comment">// 使用距离新像素中心最近的四个像素的颜色值得加权平均，作为新像素的值（与 NEAREST对比，该方法图像质量更好，但是会有比较大的开销）</span></span><br><span class="line"><span class="keyword">const</span> GLenum LINEAR                         = 0x2601;</span><br><span class="line"><span class="comment">// 以下是金字塔纹理常量</span></span><br><span class="line"><span class="keyword">const</span> GLenum NEAREST_MIPMAP_NEAREST         = 0x2700;</span><br><span class="line"><span class="keyword">const</span> GLenum LINEAR_MIPMAP_NEAREST          = 0x2701;</span><br><span class="line"><span class="keyword">const</span> GLenum NEAREST_MIPMAP_LINEAR          = 0x2702;</span><br><span class="line"><span class="keyword">const</span> GLenum LINEAR_MIPMAP_LINEAR           = 0x2703;</span><br><span class="line"></span><br><span class="line"><span class="comment">// texParameterf param 参数 当 pname = TEXTURE_WRAP_S | TEXTURE_WRAP_T</span></span><br><span class="line"><span class="comment">// texParameteri param 参数 当 pname = TEXTURE_WRAP_S | TEXTURE_WRAP_T</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 平铺式的重复纹理</span></span><br><span class="line"><span class="keyword">const</span> GLenum REPEAT                         = 0x2901; </span><br><span class="line"><span class="comment">// 镜像对称式的重复纹理</span></span><br><span class="line"><span class="keyword">const</span> GLenum CLAMP_TO_EDGE                  = 0x812F; </span><br><span class="line"><span class="comment">// 使用纹理图像的边缘值</span></span><br><span class="line"><span class="keyword">const</span> GLenum MIRRORED_REPEAT                = 0x8370; </span><br><span class="line"></span><br><span class="line"><span class="comment">// texImage2D 的 internalformat 参数</span></span><br><span class="line"><span class="keyword">const</span> GLenum ALPHA                          = 0x1906;</span><br><span class="line"><span class="keyword">const</span> GLenum RGB                            = 0x1907;</span><br><span class="line"><span class="keyword">const</span> GLenum RGBA                           = 0x1908;</span><br><span class="line"><span class="keyword">const</span> GLenum LUMINANCE                      = 0x1909;</span><br><span class="line"><span class="keyword">const</span> GLenum LUMINANCE_ALPHA                = 0x190A;</span><br><span class="line"></span><br><span class="line"><span class="comment">// texImage2D 的 type 参数</span></span><br><span class="line"><span class="comment">// 前文已定义</span></span><br><span class="line"><span class="keyword">const</span> GLenum UNSIGNED_BYTE; </span><br><span class="line"><span class="comment">// RGBA</span></span><br><span class="line"><span class="keyword">const</span> GLenum UNSIGNED_SHORT_4_4_4_4         = 0x8033; </span><br><span class="line"><span class="comment">// RGBA</span></span><br><span class="line"><span class="keyword">const</span> GLenum UNSIGNED_SHORT_5_5_5_1         = 0x8034; </span><br><span class="line"><span class="comment">// RGB</span></span><br><span class="line"><span class="keyword">const</span> GLenum UNSIGNED_SHORT_5_6_5           = 0x8363; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建纹理对象以存储纹理图像</span></span><br><span class="line">WebGLTexture? createTexture();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用texture删除纹理对象</span></span><br><span class="line"><span class="keyword">void</span> deleteTexture(WebGLTexture? texture);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 pname 和 param 指定的方式加载得到的图像</span></span><br><span class="line"><span class="comment">// @param pname 见上面的枚举</span></span><br><span class="line"><span class="comment">// @param param 指定 非0为true、0为false 必须是整数</span></span><br><span class="line"><span class="keyword">void</span> pixelStorei(GLenum pname, GLint param);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 激活纹理单元 参数是常量 gl.TEXTURE&lt;I&gt; 见上面枚举</span></span><br><span class="line"><span class="keyword">void</span> activeTexture(GLenum texture);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开启 texture 指定的纹理对象，并将其绑定到 target 上。 </span></span><br><span class="line"><span class="comment">// 如果已经通过 gl.activeTexture 激活了某个纹理单元，则纹理对象也会绑定到这个纹理单元上</span></span><br><span class="line"><span class="comment">// @param target 绑定类型 TEXTURE_CUBE_MAP（立方体纹理） | TEXTURE_2D （平面纹理）</span></span><br><span class="line"><span class="comment">// @param texture 绑定的纹理单元</span></span><br><span class="line"><span class="keyword">void</span> bindTexture(GLenum target, WebGLTexture? texture);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 配置纹理，将param值赋给绑定到目标的纹理对象的pname参数上</span></span><br><span class="line"><span class="comment">// @param target 同上</span></span><br><span class="line"><span class="comment">// @param pname 见上面枚举 纹理参数</span></span><br><span class="line"><span class="comment">// @param param 见上面枚举 纹理参数的值</span></span><br><span class="line"><span class="keyword">void</span> texParameterf(GLenum target, GLenum pname, GLfloat param);</span><br><span class="line"><span class="keyword">void</span> texParameteri(GLenum target, GLenum pname, GLint param);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将 source 指定的图像分配给绑定到目标上的纹理对象</span></span><br><span class="line"><span class="comment">// @param target 同上</span></span><br><span class="line"><span class="comment">// @param level 传入0 （该参数是为金字塔纹理准备的）</span></span><br><span class="line"><span class="comment">// @param internalformat 图像的内部格式 见上枚举</span></span><br><span class="line"><span class="comment">// @param format 纹理数据的格式 必须使用与 internalformat 相同的值</span></span><br><span class="line"><span class="comment">// @param type 纹理数据的类型</span></span><br><span class="line"><span class="comment">// @param source 包含纹理图像的Image对象</span></span><br><span class="line"><span class="comment">// May throw DOMException</span></span><br><span class="line"><span class="keyword">void</span> texImage2D(GLenum target, GLint level, GLint internalformat, GLenum format, GLenum type, TexImageSource source);</span><br><span class="line"><span class="keyword">void</span> texImage2D(GLenum target, GLint level, GLint internalformat, GLsizei width, GLsizei height, GLint border, GLenum format, GLenum type, [AllowShared] ArrayBufferView? pixels);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定一个为压缩格式的2D纹理图片。</span></span><br><span class="line"><span class="keyword">void</span> compressedTexImage2D(GLenum target, GLint level, GLenum internalformat, GLsizei width, GLsizei height, GLint border, [AllowShared] ArrayBufferView data);</span><br><span class="line"><span class="comment">// 指定一个为压缩格式的2D纹理子图片。</span></span><br><span class="line"><span class="keyword">void</span> compressedTexSubImage2D(GLenum target, GLint level, GLint xoffset, GLint yoffset, GLsizei width, GLsizei height, GLenum format, [AllowShared] ArrayBufferView data);</span><br><span class="line"><span class="comment">// 复制2D纹理图片。</span></span><br><span class="line"><span class="keyword">void</span> copyTexImage2D(GLenum target, GLint level, GLenum internalformat, GLint x, GLint y, GLsizei width, GLsizei height, GLint border);</span><br><span class="line"><span class="comment">// 复制2D纹理子图片。</span></span><br><span class="line"><span class="keyword">void</span> copyTexSubImage2D(GLenum target, GLint level, GLint xoffset, GLint yoffset, GLint x, GLint y, GLsizei width, GLsizei height);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为 WebGLTexture 对象生成一组mip纹理映射。</span></span><br><span class="line"><span class="keyword">void</span> generateMipmap(GLenum target);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新当前 WebGLTexture 的子矩形。</span></span><br><span class="line"><span class="keyword">void</span> texSubImage2D(GLenum target, GLint level, GLint xoffset, GLint yoffset, GLsizei width, GLsizei height, GLenum format, GLenum type, [AllowShared] ArrayBufferView? pixels);</span><br><span class="line"><span class="keyword">void</span> texSubImage2D(GLenum target, GLint level, GLint xoffset, GLint yoffset, GLenum format, GLenum type, TexImageSource source); <span class="comment">// May throw DOMException</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 最后指定纹理单元编号</span></span><br><span class="line"><span class="comment">// gl.uniform1i(sampler, 0);</span></span><br></pre></td></tr></tbody></table></figure>
<h3>启用功能</h3>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// enable disable 的 cap 参数</span></span><br><span class="line"><span class="keyword">const</span> GLenum CULL_FACE                      = 0x0B44;</span><br><span class="line"><span class="comment">// 混合</span></span><br><span class="line"><span class="keyword">const</span> GLenum BLEND                          = 0x0BE2;</span><br><span class="line"><span class="keyword">const</span> GLenum DITHER                         = 0x0BD0;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_TEST                   = 0x0B90;</span><br><span class="line"><span class="comment">// 隐藏面消除</span></span><br><span class="line"><span class="keyword">const</span> GLenum DEPTH_TEST                     = 0x0B71;</span><br><span class="line"><span class="keyword">const</span> GLenum SCISSOR_TEST                   = 0x0C11;</span><br><span class="line"><span class="comment">// 多边形位移 （解决深度冲突问题）</span></span><br><span class="line"><span class="keyword">const</span> GLenum POLYGON_OFFSET_FILL            = 0x8037;</span><br><span class="line"><span class="keyword">const</span> GLenum SAMPLE_ALPHA_TO_COVERAGE       = 0x809E;</span><br><span class="line"><span class="keyword">const</span> GLenum SAMPLE_COVERAGE                = 0x80A0;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启用功能</span></span><br><span class="line"><span class="keyword">void</span> enable(GLenum cap);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭功能</span></span><br><span class="line"><span class="keyword">void</span> disable(GLenum cap);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解决深度冲突</span></span><br><span class="line"><span class="comment">// gl.enable(POLYGON_OFFSET_FILL);</span></span><br><span class="line"><span class="comment">// 指定加到每个顶点绘制后Z值上的偏移量，偏移量按照公式 m * factor + r * units 计算，其中m代表顶点所在表面</span></span><br><span class="line"><span class="comment">// 相对于观察者的实现角度，而r表示硬件能够区分两个Z值之差的最小值</span></span><br><span class="line"><span class="keyword">void</span> polygonOffset(GLfloat factor, GLfloat units);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 虽然上面的方法可以使用，但是在渲染器中用起来还是很麻烦的。</span></span><br><span class="line"><span class="comment">// 解决深度冲突有更好的方式，就是缩小远近裁剪面的距离</span></span><br></pre></td></tr></tbody></table></figure>
<h3>着色器相关</h3>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// createShader 的 type 参数</span></span><br><span class="line"><span class="keyword">const</span> GLenum FRAGMENT_SHADER                  = 0x8B30;</span><br><span class="line"><span class="keyword">const</span> GLenum VERTEX_SHADER                    = 0x8B31;</span><br><span class="line"></span><br><span class="line"><span class="comment">// getShaderParameter 的 pname 参数</span></span><br><span class="line"><span class="keyword">const</span> GLenum SHADER_TYPE                      = 0x8B4F;</span><br><span class="line"><span class="keyword">const</span> GLenum DELETE_STATUS                    = 0x8B80;</span><br><span class="line"><span class="keyword">const</span> GLenum COMPILE_STATUS                   = 0x8B81;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建由type指定的着色器对象</span></span><br><span class="line"><span class="comment">// @param type 见上枚举</span></span><br><span class="line">WebGLShader? createShader(GLenum type);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除 shader 指定的着色器对象</span></span><br><span class="line"><span class="keyword">void</span> deleteShader(WebGLShader? shader);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将 source 指定的字符串形式的代码传入shader指定的着色器 如果之前已经向shader传入了代码 旧的代码就会被替换掉</span></span><br><span class="line"><span class="keyword">void</span> shaderSource(WebGLShader shader, DOMString source);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编译 shader 指定的着色器中的源代码</span></span><br><span class="line"><span class="keyword">void</span> compileShader(WebGLShader shader);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取 shader 指定的着色器中 pname 指定的参数信息</span></span><br><span class="line"><span class="comment">// @param pname 见上枚举</span></span><br><span class="line">any getShaderParameter(WebGLShader shader, GLenum pname);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果 getShaderParameter(shader, COMPILE_STATUS) 返回false </span></span><br><span class="line"><span class="comment">// 则可以通过 此函数获取 指定shader 的信息日志</span></span><br><span class="line">DOMString? getShaderInfoLog(WebGLShader shader);</span><br></pre></td></tr></tbody></table></figure>
<h3>着色器程序相关</h3>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// getProgramParameter 的 pname 参数</span></span><br><span class="line"><span class="comment">// 着色器相关 章节已定义</span></span><br><span class="line"><span class="keyword">const</span> GLenum DELETE_STATUS; </span><br><span class="line"><span class="keyword">const</span> GLenum LINK_STATUS                      = 0x8B82;</span><br><span class="line"><span class="keyword">const</span> GLenum VALIDATE_STATUS                  = 0x8B83;</span><br><span class="line"><span class="keyword">const</span> GLenum ATTACHED_SHADERS                 = 0x8B85;</span><br><span class="line"><span class="keyword">const</span> GLenum ACTIVE_UNIFORMS                  = 0x8B86;</span><br><span class="line"><span class="keyword">const</span> GLenum ACTIVE_ATTRIBUTES                = 0x8B89;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建着色器程序对象</span></span><br><span class="line">WebGLProgram? createProgram();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除着色器程序对象</span></span><br><span class="line"><span class="keyword">void</span> deleteProgram(WebGLProgram? program);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将 shader 指定的着色器对象分配给 program 指定的程序对象</span></span><br><span class="line"><span class="keyword">void</span> attachShader(WebGLProgram program, WebGLShader shader);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取消 shader 指定的着色器对 program 对象的分配</span></span><br><span class="line"><span class="keyword">void</span> detachShader(WebGLProgram program, WebGLShader shader);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 连接 program 指定的程序对象中的着色器</span></span><br><span class="line"><span class="comment">// 目的：</span></span><br><span class="line"><span class="comment">// 1. 保证顶点着色器 和 片元着色器的varying变量同名同类型，且一一对应</span></span><br><span class="line"><span class="comment">// 2. 保证顶点着色器对每个varying变量赋了值</span></span><br><span class="line"><span class="comment">// 3. 保证顶点着色器 和 片元着色器中的同名 uniform 变量也是同类型的 无需一一对应</span></span><br><span class="line"><span class="comment">// 4. 保证着色器中的attribute、uniform、varying变量的个数没有超过着色器上限</span></span><br><span class="line"><span class="keyword">void</span> linkProgram(WebGLProgram program);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取 program 指定的程序对象中 pname 指定的参数信息</span></span><br><span class="line"><span class="comment">// @param pname 见上枚举</span></span><br><span class="line">any getProgramParameter(WebGLProgram program, GLenum pname);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果通过 getProgramParameter(LINK_STATUS) 获得返回值 为 false</span></span><br><span class="line"><span class="comment">// 可以通过 此函数获取 program 指定的程序对象的信息日志</span></span><br><span class="line">DOMString? getProgramInfoLog(WebGLProgram program);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证 WebGLProgram </span></span><br><span class="line"><span class="keyword">void</span> validateProgram(WebGLProgram program);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 告知 WEBGL 系统绘制时使用的 program 对象</span></span><br><span class="line"><span class="keyword">void</span> useProgram(WebGLProgram? program);</span><br></pre></td></tr></tbody></table></figure>
<p><strong>获取着色器程序相关代码</strong></p>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> program = gl.createProgram();</span><br><span class="line">gl.attacheShader(program, vertexShader);</span><br><span class="line">gl.attacheShader(program, fragmentShader);</span><br><span class="line">gl.linkProgram(program);</span><br><span class="line"><span class="keyword">if</span>(!gl.getProgramParameter(program, gl.LINK_STATUS)){</span><br><span class="line">  <span class="keyword">var</span> info = gl.getProgramInfoLog(program);</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'Could not compile WebGL program. \n\n '</span> + info);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h3>绘制相关方法</h3>
<p>绘制缓存中的顶点数据。</p>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 绘制的类型</span></span><br><span class="line"><span class="comment">// 为 gl.drawArrays、gl.drawElements 第一个参数</span></span><br><span class="line"><span class="keyword">const</span> GLenum POINTS                         = 0x0000;</span><br><span class="line"><span class="keyword">const</span> GLenum LINES                          = 0x0001;</span><br><span class="line"><span class="keyword">const</span> GLenum LINE_LOOP                      = 0x0002;</span><br><span class="line"><span class="keyword">const</span> GLenum LINE_STRIP                     = 0x0003;</span><br><span class="line"><span class="keyword">const</span> GLenum TRIANGLES                      = 0x0004;</span><br><span class="line"><span class="keyword">const</span> GLenum TRIANGLE_STRIP                 = 0x0005;</span><br><span class="line"><span class="keyword">const</span> GLenum TRIANGLE_FAN                   = 0x0006;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行绘制， 按照mode参数指定的方式绘制图形</span></span><br><span class="line"><span class="comment">// @param model 绘制模式。</span></span><br><span class="line"><span class="comment">// @param first 指定从哪个定点开始绘制</span></span><br><span class="line"><span class="comment">// @param count 指定绘制需要用到多少个顶点</span></span><br><span class="line"><span class="keyword">void</span> drawArrays(GLenum mode, GLint first, GLsizei count);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行绘制，按照mode参数制定的方式，根据绑定到 ELEMENT_ARRAY_BUFFER 的缓冲区中的顶点索引绘制图形</span></span><br><span class="line"><span class="comment">// @param model 绘制模式。</span></span><br><span class="line"><span class="comment">// @param count 指定绘制顶点的个数</span></span><br><span class="line"><span class="comment">// @param type 指定索引值数据类型。包括：UNSIGNED_BYTE、UNSIGNED_SHORT、UNSIGNED_INT</span></span><br><span class="line"><span class="comment">// @param offset 指定索引数组中绘制的偏移位置，以字节为单位</span></span><br><span class="line"><span class="keyword">void</span> drawElements(GLenum mode, GLsizei count, GLenum type, GLintptr offset);</span><br></pre></td></tr></tbody></table></figure>
<h3>查询状态参数</h3>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取当前激活的材质枚举值 getParameter</span></span><br><span class="line"><span class="keyword">const</span> GLenum ACTIVE_TEXTURE                 = 0x84E0;</span><br><span class="line"><span class="comment">// 获取材质最大支持数量 getParameter</span></span><br><span class="line"><span class="keyword">const</span> GLenum MAX_COMBINED_TEXTURE_IMAGE_UNITS = 0x8B4D;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 顶点着色器可使用最大 attribute 数量</span></span><br><span class="line"><span class="keyword">const</span> GLenum MAX_VERTEX_ATTRIBS               = 0x8869;</span><br><span class="line"><span class="comment">// 顶点着色器可使用 uniform 最大数量</span></span><br><span class="line"><span class="keyword">const</span> GLenum MAX_VERTEX_UNIFORM_VECTORS       = 0x8DFB;</span><br><span class="line"><span class="comment">// 可使用最大 varying 变量数量</span></span><br><span class="line"><span class="keyword">const</span> GLenum MAX_VARYING_VECTORS              = 0x8DFC;</span><br><span class="line"><span class="comment">// 顶点着色器纹理单元最大数量</span></span><br><span class="line"><span class="keyword">const</span> GLenum MAX_VERTEX_TEXTURE_IMAGE_UNITS   = 0x8B4C;</span><br><span class="line"><span class="comment">// 片元着色器纹理单元最大数量</span></span><br><span class="line"><span class="keyword">const</span> GLenum MAX_TEXTURE_IMAGE_UNITS          = 0x8872;</span><br><span class="line"><span class="comment">// 当前片元着色器可使用 uniform 最大数量</span></span><br><span class="line"><span class="keyword">const</span> GLenum MAX_FRAGMENT_UNIFORM_VECTORS     = 0x8DFD;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 着色器语言版本</span></span><br><span class="line"><span class="keyword">const</span> GLenum SHADING_LANGUAGE_VERSION         = 0x8B8C;</span><br><span class="line"><span class="comment">// 当前运行的着色器程序</span></span><br><span class="line"><span class="keyword">const</span> GLenum CURRENT_PROGRAM                  = 0x8B8D;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取混合方程</span></span><br><span class="line"><span class="keyword">const</span> GLenum BLEND_EQUATION                 = 0x8009;</span><br><span class="line"><span class="keyword">const</span> GLenum BLEND_EQUATION_RGB             = 0x8009;   <span class="comment">/* same as BLEND_EQUATION */</span></span><br><span class="line"><span class="keyword">const</span> GLenum BLEND_EQUATION_ALPHA           = 0x883D;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 面消除查询</span></span><br><span class="line"><span class="keyword">const</span> GLenum CULL_FACE_MODE                 = 0x0B45;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Separate Blend Functions */</span></span><br><span class="line"><span class="keyword">const</span> GLenum BLEND_DST_RGB                  = 0x80C8;</span><br><span class="line"><span class="keyword">const</span> GLenum BLEND_SRC_RGB                  = 0x80C9;</span><br><span class="line"><span class="keyword">const</span> GLenum BLEND_DST_ALPHA                = 0x80CA;</span><br><span class="line"><span class="keyword">const</span> GLenum BLEND_SRC_ALPHA                = 0x80CB;</span><br><span class="line"><span class="keyword">const</span> GLenum CONSTANT_COLOR                 = 0x8001;</span><br><span class="line"><span class="keyword">const</span> GLenum ONE_MINUS_CONSTANT_COLOR       = 0x8002;</span><br><span class="line"><span class="keyword">const</span> GLenum CONSTANT_ALPHA                 = 0x8003;</span><br><span class="line"><span class="keyword">const</span> GLenum ONE_MINUS_CONSTANT_ALPHA       = 0x8004;</span><br><span class="line"><span class="keyword">const</span> GLenum BLEND_COLOR                    = 0x8005;</span><br><span class="line"></span><br><span class="line"><span class="comment">// buffer</span></span><br><span class="line"><span class="keyword">const</span> GLenum BUFFER_SIZE                    = 0x8764;</span><br><span class="line"><span class="keyword">const</span> GLenum BUFFER_USAGE                   = 0x8765;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> GLenum CURRENT_VERTEX_ATTRIB          = 0x8626;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ErrorCode */</span></span><br><span class="line"><span class="keyword">const</span> GLenum NO_ERROR                       = 0;</span><br><span class="line"><span class="keyword">const</span> GLenum INVALID_ENUM                   = 0x0500;</span><br><span class="line"><span class="keyword">const</span> GLenum INVALID_VALUE                  = 0x0501;</span><br><span class="line"><span class="keyword">const</span> GLenum INVALID_OPERATION              = 0x0502;</span><br><span class="line"><span class="keyword">const</span> GLenum OUT_OF_MEMORY                  = 0x0505;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* GetPName */</span></span><br><span class="line"><span class="keyword">const</span> GLenum LINE_WIDTH                     = 0x0B21;</span><br><span class="line"><span class="keyword">const</span> GLenum ALIASED_POINT_SIZE_RANGE       = 0x846D;</span><br><span class="line"><span class="keyword">const</span> GLenum ALIASED_LINE_WIDTH_RANGE       = 0x846E;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> GLenum FRONT_FACE                     = 0x0B46;</span><br><span class="line"><span class="keyword">const</span> GLenum DEPTH_RANGE                    = 0x0B70;</span><br><span class="line"><span class="keyword">const</span> GLenum DEPTH_WRITEMASK                = 0x0B72;</span><br><span class="line"><span class="keyword">const</span> GLenum DEPTH_CLEAR_VALUE              = 0x0B73;</span><br><span class="line"><span class="keyword">const</span> GLenum DEPTH_FUNC                     = 0x0B74;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_CLEAR_VALUE            = 0x0B91;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_FUNC                   = 0x0B92;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_FAIL                   = 0x0B94;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_PASS_DEPTH_FAIL        = 0x0B95;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_PASS_DEPTH_PASS        = 0x0B96;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_REF                    = 0x0B97;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_VALUE_MASK             = 0x0B93;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_WRITEMASK              = 0x0B98;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_BACK_FUNC              = 0x8800;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_BACK_FAIL              = 0x8801;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_BACK_PASS_DEPTH_FAIL   = 0x8802;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_BACK_PASS_DEPTH_PASS   = 0x8803;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_BACK_REF               = 0x8CA3;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_BACK_VALUE_MASK        = 0x8CA4;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_BACK_WRITEMASK         = 0x8CA5;</span><br><span class="line"><span class="keyword">const</span> GLenum VIEWPORT                       = 0x0BA2;</span><br><span class="line"><span class="keyword">const</span> GLenum SCISSOR_BOX                    = 0x0C10;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* SCISSOR_TEST */</span></span><br><span class="line"><span class="keyword">const</span> GLenum COLOR_CLEAR_VALUE              = 0x0C22;</span><br><span class="line"><span class="keyword">const</span> GLenum COLOR_WRITEMASK                = 0x0C23;</span><br><span class="line"><span class="keyword">const</span> GLenum UNPACK_ALIGNMENT               = 0x0CF5;</span><br><span class="line"><span class="keyword">const</span> GLenum PACK_ALIGNMENT                 = 0x0D05;</span><br><span class="line"><span class="keyword">const</span> GLenum MAX_TEXTURE_SIZE               = 0x0D33;</span><br><span class="line"><span class="keyword">const</span> GLenum MAX_VIEWPORT_DIMS              = 0x0D3A;</span><br><span class="line"><span class="keyword">const</span> GLenum SUBPIXEL_BITS                  = 0x0D50;</span><br><span class="line"><span class="keyword">const</span> GLenum RED_BITS                       = 0x0D52;</span><br><span class="line"><span class="keyword">const</span> GLenum GREEN_BITS                     = 0x0D53;</span><br><span class="line"><span class="keyword">const</span> GLenum BLUE_BITS                      = 0x0D54;</span><br><span class="line"><span class="keyword">const</span> GLenum ALPHA_BITS                     = 0x0D55;</span><br><span class="line"><span class="keyword">const</span> GLenum DEPTH_BITS                     = 0x0D56;</span><br><span class="line"><span class="keyword">const</span> GLenum STENCIL_BITS                   = 0x0D57;</span><br><span class="line"><span class="keyword">const</span> GLenum POLYGON_OFFSET_UNITS           = 0x2A00;</span><br><span class="line"><span class="comment">/* POLYGON_OFFSET_FILL */</span></span><br><span class="line"><span class="keyword">const</span> GLenum POLYGON_OFFSET_FACTOR          = 0x8038;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE_BINDING_2D             = 0x8069;</span><br><span class="line"><span class="keyword">const</span> GLenum SAMPLE_BUFFERS                 = 0x80A8;</span><br><span class="line"><span class="keyword">const</span> GLenum SAMPLES                        = 0x80A9;</span><br><span class="line"><span class="keyword">const</span> GLenum SAMPLE_COVERAGE_VALUE          = 0x80AA;</span><br><span class="line"><span class="keyword">const</span> GLenum SAMPLE_COVERAGE_INVERT         = 0x80AB;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> GLenum COMPRESSED_TEXTURE_FORMATS     = 0x86A3;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* PixelFormat */</span></span><br><span class="line"><span class="keyword">const</span> GLenum DEPTH_COMPONENT                = 0x1902;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* StringName */</span></span><br><span class="line"><span class="keyword">const</span> GLenum VENDOR                         = 0x1F00;</span><br><span class="line"><span class="keyword">const</span> GLenum RENDERER                       = 0x1F01;</span><br><span class="line"><span class="keyword">const</span> GLenum VERSION                        = 0x1F02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE                        = 0x1702;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE_BINDING_CUBE_MAP       = 0x8514;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE_CUBE_MAP_POSITIVE_X    = 0x8515;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE_CUBE_MAP_NEGATIVE_X    = 0x8516;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE_CUBE_MAP_POSITIVE_Y    = 0x8517;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE_CUBE_MAP_NEGATIVE_Y    = 0x8518;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE_CUBE_MAP_POSITIVE_Z    = 0x8519;</span><br><span class="line"><span class="keyword">const</span> GLenum TEXTURE_CUBE_MAP_NEGATIVE_Z    = 0x851A;</span><br><span class="line"><span class="keyword">const</span> GLenum MAX_CUBE_MAP_TEXTURE_SIZE      = 0x851C;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Vertex Arrays */</span></span><br><span class="line"><span class="keyword">const</span> GLenum VERTEX_ATTRIB_ARRAY_ENABLED        = 0x8622;</span><br><span class="line"><span class="keyword">const</span> GLenum VERTEX_ATTRIB_ARRAY_SIZE           = 0x8623;</span><br><span class="line"><span class="keyword">const</span> GLenum VERTEX_ATTRIB_ARRAY_STRIDE         = 0x8624;</span><br><span class="line"><span class="keyword">const</span> GLenum VERTEX_ATTRIB_ARRAY_TYPE           = 0x8625;</span><br><span class="line"><span class="keyword">const</span> GLenum VERTEX_ATTRIB_ARRAY_NORMALIZED     = 0x886A;</span><br><span class="line"><span class="keyword">const</span> GLenum VERTEX_ATTRIB_ARRAY_POINTER        = 0x8645;</span><br><span class="line"><span class="keyword">const</span> GLenum VERTEX_ATTRIB_ARRAY_BUFFER_BINDING = 0x889F;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Read Format */</span></span><br><span class="line"><span class="keyword">const</span> GLenum IMPLEMENTATION_COLOR_READ_TYPE   = 0x8B9A;</span><br><span class="line"><span class="keyword">const</span> GLenum IMPLEMENTATION_COLOR_READ_FORMAT = 0x8B9B;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Shader Precision-Specified Types */</span></span><br><span class="line"><span class="keyword">const</span> GLenum LOW_FLOAT                      = 0x8DF0;</span><br><span class="line"><span class="keyword">const</span> GLenum MEDIUM_FLOAT                   = 0x8DF1;</span><br><span class="line"><span class="keyword">const</span> GLenum HIGH_FLOAT                     = 0x8DF2;</span><br><span class="line"><span class="keyword">const</span> GLenum LOW_INT                        = 0x8DF3;</span><br><span class="line"><span class="keyword">const</span> GLenum MEDIUM_INT                     = 0x8DF4;</span><br><span class="line"><span class="keyword">const</span> GLenum HIGH_INT                       = 0x8DF5;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> GLenum DEPTH_STENCIL                  = 0x84F9;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> GLenum RENDERBUFFER_WIDTH             = 0x8D42;</span><br><span class="line"><span class="keyword">const</span> GLenum RENDERBUFFER_HEIGHT            = 0x8D43;</span><br><span class="line"><span class="keyword">const</span> GLenum RENDERBUFFER_INTERNAL_FORMAT   = 0x8D44;</span><br><span class="line"><span class="keyword">const</span> GLenum RENDERBUFFER_RED_SIZE          = 0x8D50;</span><br><span class="line"><span class="keyword">const</span> GLenum RENDERBUFFER_GREEN_SIZE        = 0x8D51;</span><br><span class="line"><span class="keyword">const</span> GLenum RENDERBUFFER_BLUE_SIZE         = 0x8D52;</span><br><span class="line"><span class="keyword">const</span> GLenum RENDERBUFFER_ALPHA_SIZE        = 0x8D53;</span><br><span class="line"><span class="keyword">const</span> GLenum RENDERBUFFER_DEPTH_SIZE        = 0x8D54;</span><br><span class="line"><span class="keyword">const</span> GLenum RENDERBUFFER_STENCIL_SIZE      = 0x8D55;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> GLenum FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE           = 0x8CD0;</span><br><span class="line"><span class="keyword">const</span> GLenum FRAMEBUFFER_ATTACHMENT_OBJECT_NAME           = 0x8CD1;</span><br><span class="line"><span class="keyword">const</span> GLenum FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL         = 0x8CD2;</span><br><span class="line"><span class="keyword">const</span> GLenum FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE = 0x8CD3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> GLenum NONE                           = 0;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> GLenum FRAMEBUFFER_COMPLETE                      = 0x8CD5;</span><br><span class="line"><span class="keyword">const</span> GLenum FRAMEBUFFER_INCOMPLETE_ATTACHMENT         = 0x8CD6;</span><br><span class="line"><span class="keyword">const</span> GLenum FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT = 0x8CD7;</span><br><span class="line"><span class="keyword">const</span> GLenum FRAMEBUFFER_INCOMPLETE_DIMENSIONS         = 0x8CD9;</span><br><span class="line"><span class="keyword">const</span> GLenum FRAMEBUFFER_UNSUPPORTED                   = 0x8CDD;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> GLenum FRAMEBUFFER_BINDING            = 0x8CA6;</span><br><span class="line"><span class="keyword">const</span> GLenum RENDERBUFFER_BINDING           = 0x8CA7;</span><br><span class="line"><span class="keyword">const</span> GLenum MAX_RENDERBUFFER_SIZE          = 0x84E8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> GLenum INVALID_FRAMEBUFFER_OPERATION  = 0x0506;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> GLenum CONTEXT_LOST_WEBGL                 = 0x9242;</span><br><span class="line"><span class="keyword">const</span> GLenum UNPACK_COLORSPACE_CONVERSION_WEBGL = 0x9243;</span><br><span class="line"><span class="keyword">const</span> GLenum BROWSER_DEFAULT_WEBGL              = 0x9244;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过查询参数获取值</span></span><br><span class="line">any getParameter(GLenum pname);</span><br><span class="line">any getTexParameter(GLenum target, GLenum pname);</span><br><span class="line"><span class="comment">// 查询着色器相关参数</span></span><br><span class="line">any getShaderParameter(WebGLShader shader, GLenum pname);</span><br><span class="line"><span class="comment">// 查询着色器程序相关参数</span></span><br><span class="line">any getProgramParameter(WebGLProgram program, GLenum pname);</span><br><span class="line"><span class="comment">// 返回激活状态的attribute变量信息。</span></span><br><span class="line">WebGLActiveInfo? getActiveAttrib(WebGLProgram program, GLuint index);</span><br><span class="line"><span class="comment">// 返回激活状态的uniform 变量信息。</span></span><br><span class="line">WebGLActiveInfo? getActiveUniform(WebGLProgram program, GLuint index);</span><br><span class="line"><span class="comment">// 返回附加在 WebGLProgram 上的 WebGLShader 对象的列表</span></span><br><span class="line">sequence&lt;WebGLShader&gt;? getAttachedShaders(WebGLProgram program);</span><br><span class="line"><span class="comment">// 返回缓冲信息。</span></span><br><span class="line">any getBufferParameter(GLenum target, GLenum pname);</span><br><span class="line"><span class="comment">// 返回错误信息。</span></span><br><span class="line">[WebGLHandlesContextLoss] GLenum getError();</span><br><span class="line"><span class="comment">// 返回帧缓冲区的信息。</span></span><br><span class="line">any getFramebufferAttachmentParameter(GLenum target, GLenum attachment, GLenum pname);</span><br><span class="line"><span class="comment">// 返回渲染缓冲区的信息。</span></span><br><span class="line">any getRenderbufferParameter(GLenum target, GLenum pname);</span><br><span class="line"><span class="comment">// 返回一个描述着色器数字类型精度的WebGLShaderPrecisionFormat 对象。</span></span><br><span class="line">WebGLShaderPrecisionFormat? getShaderPrecisionFormat(GLenum shadertype, GLenum precisiontype);</span><br><span class="line"><span class="comment">// 以字符串形式返回 WebGLShader 的源码。</span></span><br><span class="line">DOMString? getShaderSource(WebGLShader shader);</span><br><span class="line"><span class="comment">// 返回指定位置的uniform 变量。</span></span><br><span class="line">any getUniform(WebGLProgram program, WebGLUniformLocation location);</span><br><span class="line"><span class="comment">// 返回指定位置的顶点attribute变量。</span></span><br><span class="line">any getVertexAttrib(GLuint index, GLenum pname);</span><br><span class="line"><span class="comment">// 获取给定索引的顶点attribute位置。</span></span><br><span class="line">[WebGLHandlesContextLoss] GLintptr getVertexAttribOffset(GLuint index, GLenum pname);</span><br></pre></td></tr></tbody></table></figure>
<h3>扩展</h3>
<p>通过扩展基本上能使 <code>WebGL1</code> 拥有 <code>WebGL2</code> 的能力。</p>
<ol>
<li>获取扩展以及扩展支持信息</li>
</ol>
<figure class="well highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取扩展</span></span><br><span class="line">object? getExtension(DOMString name);</span><br><span class="line"><span class="comment">// 获取扩展支持信息</span></span><br><span class="line">sequence&lt;DOMString&gt;? getSupportedExtensions();</span><br></pre></td></tr></tbody></table></figure>
<ol start="2">
<li>使用扩展字符串获取扩展对象</li>
</ol>
<div class="table-responsive"><table class="table table-condensed table-hover">
<thead>
<tr>
<th>扩展名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ANGLE_instanced_arrays</td>
<td>允许绘制多次同样的一个或者多个对象<br>条件：分享顶点数据、原始计数和类型</td>
</tr>
<tr>
<td>EXT_blend_minmax</td>
<td>通过添加两个新的混合方程来扩展混合能力</td>
</tr>
<tr>
<td>EXT_color_buffer_float</td>
<td>添加渲染各种浮点格式的能力</td>
</tr>
<tr>
<td>EXT_color_buffer_half_float</td>
<td>添加渲染各种16位浮点格式的能力</td>
</tr>
<tr>
<td>EXT_disjoint_timer_query</td>
<td>提供一种测量一组GL命令的持续时间的方法，<br>不会影响渲染管道的稳定性</td>
</tr>
<tr>
<td>EXT_frag_depth</td>
<td>能够在片段着色器中设置片段深度值</td>
</tr>
<tr>
<td>EXT_sRGB</td>
<td>为 FrameBuffer 提供sRGB支持</td>
</tr>
<tr>
<td>EXT_shader_texture_lod</td>
<td>为着色器提供LOD能力</td>
</tr>
<tr>
<td>EXT_texture_filter_anisotropic</td>
<td>提高斜角观察质量</td>
</tr>
<tr>
<td>OES_element_index_uint</td>
<td>使 drawElements 支持 UNSIGNED_INT 类型</td>
</tr>
<tr>
<td>OES_standard_derivatives</td>
<td>为着色器提供 <code>dFdx/dFdy/fwidth</code> 函数</td>
</tr>
<tr>
<td>OES_texture_float</td>
<td>为材质添加 FLOAT 类型</td>
</tr>
<tr>
<td>OES_texture_float_linear</td>
<td>允许材质的线性过滤</td>
</tr>
<tr>
<td>OES_texture_half_float</td>
<td>为材质添加 16 位支持</td>
</tr>
<tr>
<td>OES_texture_half_float_linear</td>
<td>允许16 位材质精度的线性过滤</td>
</tr>
<tr>
<td>OES_vertex_array_object</td>
<td>提供压缩顶点数组的方法，指向不同顶点数据缓存</td>
</tr>
<tr>
<td>WEBGL_color_buffer_float</td>
<td>允许输出32位颜色缓冲</td>
</tr>
<tr>
<td>WEBGL_compressed_texture_astc</td>
<td>exposes Adaptive Scalable Texture Compression (ASTC) compressed texture formats to WebGL.</td>
</tr>
<tr>
<td>WEBGL_compressed_texture_atc</td>
<td>exposes 3 ATC compressed texture formats.</td>
</tr>
<tr>
<td>WEBGL_compressed_texture_etc</td>
<td>exposes 10 ETC/EAC compressed texture formats</td>
</tr>
<tr>
<td>WEBGL_compressed_texture_etc1</td>
<td>exposes the ETC1 compressed texture format.</td>
</tr>
<tr>
<td>WEBGL_compressed_texture_pvrtc</td>
<td>exposes four PVRTC compressed texture formats.</td>
</tr>
<tr>
<td>WEBGL_compressed_texture_s3tc</td>
<td>exposes four S3TC compressed texture formats.</td>
</tr>
<tr>
<td>WEBGL_compressed_texture_s3tc_srgb</td>
<td>exposes four S3TC compressed texture formats for the sRGB colorspace.</td>
</tr>
<tr>
<td>WEBGL_debug_renderer_info</td>
<td>获取渲染信息（公司等）</td>
</tr>
<tr>
<td>WEBGL_debug_shaders</td>
<td>获取着色器源码信息</td>
</tr>
<tr>
<td>WEBGL_depth_texture</td>
<td>定义深度和深度模板材质</td>
</tr>
<tr>
<td>WEBGL_draw_buffers</td>
<td>允许着色器一次性输出多张材质，对延迟渲染大有帮助</td>
</tr>
<tr>
<td>WEBGL_lose_context</td>
<td>暴露上下文丢失和恢复函数</td>
</tr>
</tbody>
</table></div>
<h2>引用</h2>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WebGLRenderingContext">WebGLRenderingContext</a></li>
</ul>
<blockquote>
<p>另外：欢迎邮件交流。</p>
</blockquote>

        </div>
    </div>
    <div class="blog-footer">
        <div class="media-left">
            <a href="../../../../../tags/WebGL">#WebGL</a>
            <a href="../../../../../tags/API">#API</a>
        </div>
<!--        <div class="media-body text-right">-->
<!--            <span class="mar-rgt">-->
<!--                <i class="pli-heart-2 icon-fw"></i>0-->
<!--            </span>-->
<!--            <i class="pli-speech-bubble-5 icon-fw"></i>0-->
<!--        </div>-->
    </div>
    
<hr class="new-section-sm bord-no">
<p class="text-lg text-main text-bold text-uppercase">留言</p>
<form role="form" id="comment-form">
    <div class="row">
        <div class="col-md-4">

            <div class="form-group">
                <input name="name" type="text" class="form-control" placeholder="昵称">
            </div>
            <div class="form-group">
                <input name="email" type="email" class="form-control" placeholder="电子邮件">
            </div>
            <div class="form-group">
                <input name="website" type="url" class="form-control" placeholder="个人网站">
            </div>
            <div class="form-group">
                <button id="comment-submit" type="button" class="btn btn-success btn-block"><i class="fa fa-comment"></i> 留言</button>
            </div>

        </div>
        <div class="col-md-8">
            <div class="form-group">
                <textarea name="comment" class="form-control" rows="9" placeholder="留言（不超过1000字）"></textarea>
            </div>
        </div>
    </div>
</form>

<hr class="new-section-sm">
<p class="text-lg text-main text-bold text-uppercase pad-btm">最近留言</p>

<div id="comments"></div>
</div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<footer id="footer" style="height:65px;text-align: center;">
    <p>Copyright &#0169; 2021 zhoyq.com. All rights reserved.</p>
    <p>
        <a target="_blank" href="https://beian.miit.gov.cn">京ICP备 17068495号-1</a>
    </p>
</footer>
<button class="scroll-top btn">
    <i class="pci-chevron chevron-up"></i>
</button></div>
<div id="search-modal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><i class="pci-cross pci-circle"></i></button>
                <h4 class="modal-title" id="search-modal-title"></h4>
            </div>
            <div class="modal-body panel-body" >
                <ul id="search-modal-body"></ul>
            </div>
        </div>
    </div>
</div><script src="../../../../../js/jquery.min.js"></script>
<script src="../../../../../js/bootstrap.min.js"></script>
<script src="../../../../../js/nifty.min.js"></script>


<script src="../../../../../js/search.js"></script>

<script type="text/javascript">
    // 此处获取 文章标题 作为id
    var articleTitle = "【WebGL】WebGL API 详解";
</script>
<script type="text/javascript" src="../../../../../js/comment.js"></script>

<script type="text/javascript">
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?e7eca3e34db2b061a85a917b15c506c8";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();
</script>
</body>
</html>